<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Chi Tiết Sản Phẩm</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
<!--    <div class="container">-->
<!--        <h1>Product Details</h1>-->
<!--        <div>-->
<!--            <p><strong>ID:</strong> <span th:text="${product.id}"></span></p>-->
<!--            <p><strong>Name:</strong> <span th:text="${product.nameProduct}"></span></p>-->
<!--            <p><strong>Description:</strong> <span th:text="${product.description}"></span></p>-->
<!--            <p><strong>Price:</strong> <span th:text="${product.price}"></span></p>-->
<!--            <p><strong>Category:</strong> <span th:text="${product.category.nameProductCategory}"></span></p>-->
<!--            <div th:if="${product.imagePath}">-->
<!--                <p><strong>Image:</strong></p>-->
<!--                <img th:src="@{|${product.imagePath}|}" alt="Product Image" width="300">-->
<!--            </div>-->
<!--            <a th:href="@{/products}" class="btn btn-primary">Back to list</a>-->
<!--        </div>-->
<!--    </div>-->
<section layout:fragment="content">
    <div style="height: 90px;"></div>
    <div class="container">
        <div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
            <a href="/" class="stext-109 cl8 hov-cl1 trans-04">
                Trang Chủ
                <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
            </a>
            <a href="product.html" class="stext-109 cl8 hov-cl1 trans-04">
                <span th:text="${product.category.nameProductCategory}"></span>
                <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
            </a>
            <span class="stext-109 cl4">
                <span th:text="${product.nameProduct}"></span>
            </span>
        </div>
    </div>
    <section class="sec-product-detail bg0 p-t-65 p-b-60">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-lg-7 p-b-30 flex-container">
                    <div class="p-l-25 p-r-30 p-lr-0-lg flex-container">
                        <div class="wrap-slick3 flex-sb flex-w">
                            <div class="slick3 gallery-lb">
                                <div class="item-slick3">
                                    <div class="wrap-pic-w pos-relative">
                                        <img th:src="@{|${product.imagePath}|}" alt="IMG-PRODUCT">
                                        <a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04" th:href="@{|${product.imagePath}|}">
                                            <i class="fa fa-expand"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-5 p-b-30 flex-container">
                    <div class="p-r-50 p-t-5 p-lr-0-lg">
                        <h4 class="mtext-105 cl2 js-name-detail p-b-14" th:text="${product.nameProduct}">Product Name</h4>
                        <span class="stext-105 cl3" th:if="${product.salePrice != null}" style="text-decoration: line-through;"
                              th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + ' VND'">Price</span>
                        <span class="stext-105 cl3" th:if="${product.salePrice == null}"
                              th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + ' VND'">Price</span>
                        <span class="stext-106 cl3" th:if="${product.salePrice != null}"
                              th:text="${#numbers.formatDecimal(product.salePrice, 0, 'COMMA', 0, 'POINT')} + ' VND'">Sale Price</span>
                        <p class="stext-102 cl3 p-t-23" th:text="${product.description}">Product Description</p>
                        <div class="p-t-33">
                            <div class="flex-w flex-r-m p-b-10">
                                <div class="size-204 flex-w flex-m respon6-next">
                                    <form id="add-to-cart-form" th:action="@{/cart/add}" method="post">
                                        <div class="wrap-num-product flex-w m-r-20 m-tb-10">
                                            <div class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m">
                                                <i class="fs-16 zmdi zmdi-minus"></i>
                                            </div>
                                            <input type="number" name="quantity" min="1" value="1" class="mtext-104 cl3 txt-center num-product">
                                            <div class="btn-num-product-up cl8 hov-btn3 trans-04 flex-c-m">
                                                <i class="fs-16 zmdi zmdi-plus"></i>
                                            </div>
                                        </div>
                                        <input type="hidden" th:value="${product.id}" name="productId"/>
                                        <button type="submit" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 js-addcart-detail">Add to Cart</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex-w flex-m p-l-100 p-t-40 respon7">
                    <div class="flex-m bor9 p-r-10 m-r-11">
                        <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 js-addwish-detail tooltip100" data-tooltip="Add to Wishlist">
                            <i class="zmdi zmdi-favorite"></i>
                        </a>
                    </div>
                    <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Facebook">
                        <i class="fa fa-facebook"></i>
                    </a>
                    <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Twitter">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a href="#" class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100" data-tooltip="Google Plus">
                        <i class="fa fa-google-plus"></i>
                    </a>
                </div>
            </div>
            <div class="bor10 m-t-50 p-t-43 p-b-40">
                <div class="tab01">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item p-b-10">
                            <a class="nav-link active" data-toggle="tab" href="#description" role="tab">Description</a>
                        </li>
                        <li class="nav-item p-b-10">
                            <a class="nav-link" data-toggle="tab" href="#information" role="tab">Additional information</a>
                        </li>
                        <li class="nav-item p-b-10">
                            <a class="nav-link" data-toggle="tab" href="#reviews" role="tab">Reviews (1)</a>
                        </li>
                    </ul>
                    <div class="tab-content p-t-43">
                        <div class="tab-pane fade show active" id="description" role="tabpanel">
                            <div class="how-pos2 p-lr-15-md">
                                <p class="stext-102 cl6" th:text="${product.description}">
                                    Product description goes here...
                                </p>
                            </div>
                        </div>
                        <!-- Add additional tabs and content as necessary -->
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="bg0 p-t-23 p-b-140">
        <div class="container">
            <div class="section-content-responsive">
                <header class="section-header row">
                    <h2 class="section-header-headline typography-section-headline" data-staggered-anchor="" data-staggered-before-item="" style="">Khám phá dòng sản phẩm.</h2>
                    <div class="section-header-cta-container typography-section-headline-link column" data-staggered-before-item="" style="">
                        <a href="/vn/mac/compare/" data-analytics-title="compare all models" class="icon-wrapper"><span class="icon-copy">So sánh tất cả các phiên bản</span><span class="icon icon-after more"></span></a> </div>
                </header>
            </div>

            <div class="row">
                <div th:each="product, iterStat : ${products}" class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item"
                     th:if="${iterStat.index} &lt; 4">
                    <div class="block2">
                        <div class="block2-pic hov-img0">
                            <img th:src="@{|${product.imagePath}|}" alt="IMG-PRODUCT" class="img-thumbnail" style="width: 100%; height: auto;">
                            <a href="#"
                               th:data-product-id="${product.id}"
                               th:data-product-name="${product.nameProduct}"
                               th:data-product-price="${product.price}"
                               th:data-product-description="${product.description}"
                               th:data-product-image="${product.imagePath}"
                               class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1">
                                Xem Nhanh
                            </a>

                        </div>
                        <div class="block2-txt flex-w flex-t p-t-14">
                            <div class="block2-txt-child1 flex-col-l">
                                <a th:href="@{/products/view/{id}(id=${product.id})}" class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                    <span th:text="${product.nameProduct}">Product Name</span>
                                </a>
                                <span class="stext-105 cl3" th:if="${product.salePrice != null}" style="text-decoration: line-through;"
                                      th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + ' VND'">Price</span>
                                <span class="stext-105 cl3" th:if="${product.salePrice == null}"
                                      th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + ' VND'">Price</span>
                                <span class="stext-106 cl3" th:if="${product.salePrice != null}"
                                      th:text="${#numbers.formatDecimal(product.salePrice, 0, 'COMMA', 0, 'POINT')} + ' VND'">Sale Price</span>
                            </div>
                            <div class="block2-txt-child2 flex-r p-t-3">
                                <a href="#" class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                    <img class="icon-heart1 dis-block trans-04" src="https://i.imgur.com/JY3PugV.png" alt="ICON">
                                    <img class="icon-heart2 dis-block trans-04 ab-t-l" src="https://i.imgur.com/32F0Wpx.png" alt="ICON">
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>
    <section class="section section-values" data-analytics-section-engagement="name:values">
        <div class="section-content-responsive">
            <h2 class="typography-section-headline">Các giá trị. <br class="medium small">Những điều thật sự quan trọng.</h2>
        </div>
        <div class="scroll-gallery values-gallery" id="values-gallery" data-component-list="ScrollGallery" aria-label="thư viện giá trị" data-analytics-gallery-id="values gallery">
            <div class="scroll-container">
                <ul role="list" class="item-container">
                    <li class="gallery-item current" id="secure" data-ac-gallery-item="" data-analytics-gallery-item-id="privacy" role="listitem">
                        <div class="tile tile-secure tile-rounded">
                            <div class="tile-content">
                                <picture id="overview-icon-privacy-1" class="overview-icon-privacy icon loaded" data-lazy="" data-picture-loaded="">

                                    <source srcset="/images/p3.png, /images/p3.png" media="(max-width:734px)"><source srcset="/images/p3.png, /images/p3.png" media="(min-width:0px)"><img src="/images/p3.png" onload="window.__lp?.(event)" alt="">
                                </picture>
                                <noscript>
                                    <picture class="overview-icon-privacy icon">
                                        <source srcset="/images/p3.png, /images/p3.png" media="(max-width:734px)" /><source srcset="/images/p3.png, /images/p3.png" media="(min-width:0px)" />
                                        <img src="/images/p3.png" alt >
                                    </picture>
                                </noscript>
                                <div tabindex="-1">
                                    <h3 class="typography-tile-headline">Riêng tư và bảo mật. Trong và ngoài trường&nbsp;học.</h3>
                                    <div class="tile-copy">
                                        <p>Tất cả sản phẩm Apple đều được thiết kế ngay từ đầu với mục tiêu bảo vệ quyền riêng tư của bạn, cho bạn tự do chọn chia sẻ những gì và chia sẻ như thể nào.</p>
                                    </div>
                                </div>
                                <p class="tile-link"><a href="/vn/privacy/" data-analytics-title="learn more - privacy" aria-label="Tìm hiểu thêm, Quyền Riêng Tư" class="icon-wrapper"><span class="icon-copy">Tìm hiểu thêm</span><span class="icon icon-after more"></span></a></p>
                            </div>
                        </div>
                    </li>
                    <li class="gallery-item" id="accessible" data-ac-gallery-item="" data-analytics-gallery-item-id="accessibility" role="listitem">
                        <div class="tile tile-accessible tile-rounded">
                            <div class="tile-content">
                                <picture id="overview-icon-accessibility-1" class="overview-icon-accessibility icon loaded" data-lazy="" data-picture-loaded="">

                                    <source srcset="/images/p2.png, /images/p2.png" media="(max-width:734px)"><source srcset="/images/p2.png, /images/p1.png" media="(min-width:0px)"><img src="/images/p3.png" onload="window.__lp?.(event)" alt="">
                                </picture>
                                <noscript>
                                    <picture class="overview-icon-privacy icon">
                                        <source srcset="/images/p2.png, /images/p2.png" media="(max-width:734px)" /><source srcset="/images/p2.png, /images/p2.png" media="(min-width:0px)" />
                                        <img src="/images/p2.png" alt >
                                    </picture>
                                </noscript>
                                <div tabindex="-1">
                                    <h3 class="typography-tile-headline">Dễ dàng sử dụng <br>cho việc học.</h3>
                                    <div class="tile-copy">
                                        <p>Các sản phẩm của Apple được thiết kế cho mọi người. Mọi thiết bị đều tích hợp sẵn các tính năng thị giác, vận động, thính giác và năng lực nhận thức.</p>
                                    </div>
                                </div>
                                <p class="tile-link"><a href="/vn/accessibility/" data-analytics-title="learn more - accessibility" aria-label="Tìm hiểu thêm, Trợ Năng" class="icon-wrapper"><span class="icon-copy">Tìm hiểu thêm</span><span class="icon icon-after more"></span></a></p>
                            </div>
                        </div>
                    </li>
                    <li class="gallery-item" id="eco" data-ac-gallery-item="" data-analytics-gallery-item-id="environment" role="listitem">
                        <div class="tile tile-eco tile-rounded">
                            <div class="tile-content">
                                <picture id="overview-icon-environment-1" class="overview-icon-environment icon loaded" data-lazy="" data-picture-loaded="">

                                    <source srcset="/images/p1.png, /images/p1.png" media="(max-width:734px)"><source srcset="/images/p1.png, /images/p1.png" media="(min-width:0px)"><img src="/images/p3.png" onload="window.__lp?.(event)" alt="">
                                </picture>
                                <noscript>
                                    <picture class="overview-icon-privacy icon">
                                        <source srcset="/images/p1.png, /images/p1.png" media="(max-width:734px)" /><source srcset="/images/p1.png, /images/p1.png" media="(min-width:0px)" />
                                        <img src="/images/p1.png" alt >
                                    </picture>
                                </noscript>
                                <div tabindex="-1">
                                    <h3 class="typography-tile-headline">Được thiết kế <br class="large">hướng tới tương lai.</h3>
                                    <div class="tile-copy">
                                        <p>Từ nguyên vật liệu sản xuất cho tới tiết kiệm năng lượng, các sản phẩm của Apple được thiết kế để giảm tác động lên hành tinh trong khi tối đa hóa hiệu năng và&nbsp;sức&nbsp;mạnh.</p>
                                    </div>
                                </div>
                                <p class="tile-link"><a href="/vn/environment/" data-analytics-title="learn more - environment" aria-label="Tìm hiểu thêm, Môi Trường" class="icon-wrapper"><span class="icon-copy">Tìm hiểu thêm</span><span class="icon icon-after more"></span></a></p>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div data-analytics-gallery-interaction-type="paddlenav" class="paddlenav paddlenav-side-aligned paddlenav-outside paddlenav-alpha paddlenav-disabled">
                <ul>
                    <li>
                        <button class="paddlenav-arrow paddlenav-arrow-previous" aria-label="Trước" disabled="true">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">
                                <path d="M21.559,12.062 L15.618,17.984 L21.5221,23.944 C22.105,24.533 22.1021,25.482 21.5131,26.065 C21.2211,26.355 20.8391,26.4999987 20.4571,26.4999987 C20.0711,26.4999987 19.6851,26.352 19.3921,26.056 L12.4351,19.034 C11.8531,18.446 11.8551,17.4999987 12.4411,16.916 L19.4411,9.938 C20.0261,9.353 20.9781,9.354 21.5621,9.941 C22.1471,10.528 22.1451,11.478 21.5591,12.062 L21.559,12.062 Z">
                                </path>
                            </svg>
                        </button>
                    </li>
                    <li>
                        <button class="paddlenav-arrow paddlenav-arrow-next" aria-label="Tiếp" disabled="true">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">
                                <path d="M23.5587,16.916 C24.1447,17.4999987 24.1467,18.446 23.5647,19.034 L16.6077,26.056 C16.3147,26.352 15.9287,26.4999987 15.5427,26.4999987 C15.1607,26.4999987 14.7787,26.355 14.4867,26.065 C13.8977,25.482 13.8947,24.533 14.4777,23.944 L20.3818,17.984 L14.4408,12.062 C13.8548,11.478 13.8528,10.5279 14.4378,9.941 C15.0218,9.354 15.9738,9.353 16.5588,9.938 L23.5588,16.916 L23.5587,16.916 Z">
                                </path>
                            </svg>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </section>
</section>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        document.querySelector('#add-to-cart-form').addEventListener('submit', function(e) {
            e.preventDefault(); // Ngăn chặn hành vi submit mặc định
            var form = this;
            var formData = new FormData(form);

            fetch(form.getAttribute('action'), {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Hiển thị thông báo SweetAlert
                Swal.fire({
                    icon: 'success',
                    title: 'Đã thêm sản phẩm vào giỏ hàng',
                    text: data.message
                }).then((result) => {
                    if (result.isConfirmed) {
                        location.reload(); // Tải lại trang khi bấm OK
                    }
                });
            })
            .catch(error => {
                // Hiển thị thông báo lỗi nếu có
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'Failed to add product to cart'
                });
            });
        });
    });
</script>
</body>
</html>
